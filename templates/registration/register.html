{% extends 'base/base.html' %}
{% load static %}
{% load css_filter %}

{% block content %}
<div class="row m-3">
  <div class="col-2">
    
  </div>
  <div class="col-9 m-3">
      
    <form class="row g-3 needs-validation"  action="" method="POST" novalidate>
      {% csrf_token %}
      
        <div class="row mb-3">
          <label class="form-label col-md-2 m-0 " for="{{ form.username.auto_id }}">{{ form.username.label }}</label>
          <div class="col-md-10">
            {% if form.username.errors %}
              {{form.username|add_custom_class:" is-invalid"}}
              <div class="invalid-feedback mb-0">
                <ul class="errorlist mb-0">
                  {% for error in form.username.errors %}
                    <li>{{ error }}</li>
                  {% endfor %}
                </ul>
              </div>
              
            {% else %}
              {{ form.username }}
            {% endif %}
        
            <div id="{{ form.username.auto_id }}_help_text" class="form-text mt-0">{{form.username.help_text}}</div>            

          </div> 
        </div> 

        <div class="row mb-3">
          <label class="form-label col-md-2 m-0 " for="{{ form.email.auto_id }}">{{ form.email.label }}</label>
          <div class="col-md-10">

            {% if form.email.errors %}
              {{form.email|add_custom_class:" is-invalid"}}
              <div class="invalid-feedback mb-0">
                <ul class="errorlist m-0">
                  {% for error in form.email.errors %}
                    <li>{{ error }}</li>
                  {% endfor %}
                </ul>
              </div>
            {% else %}
              {{ form.email }}
            {% endif %}
            <div id="{{ form.email.auto_id }}_help_text" class="form-text">{{form.email.help_text}}</div>

          </div> 
        </div> 

        <div class="row mb-3">
          <label class="form-label col-md-2 m-0 " for="{{ form.role.auto_id }}">{{ form.role.label }}</label>
          <div class="col-md-10">

            {% if form.role.errors %}
              {{form.role|add_custom_class:" is-invalid"}}
              <div class="invalid-feedback mb-0">
                <ul class="errorlist m-0">
                  {% for error in form.role.errors %}
                    <li>{{ error }}</li>
                  {% endfor %}
                </ul>
              </div>
            {% else %}
              {{ form.role }}
            {% endif %}
            <div id="{{ form.role.auto_id }}_help_text" class="form-text">{{form.role.help_text}}</div>

          </div> 
        </div> 

        <div class="row mb-3">
          <label class="form-label col-md-2 m-0 " for="{{ form.password1.auto_id }}">{{ form.password1.label }}</label>
          <div class="col-md-10">
            {% if form.password1.errors or form.password2.errors %}        
              <div class="input-group mb-3">
                {{ form.password1|add_custom_class:"form-control is-invalid" }}
                <button class="btn btn-secondary" type="button" onclick="passwordToggle('{{ form.password1.auto_id }}')"><i id="{{form.password1.auto_id}}_toggle" class="password-toggle-icon fa-solid fa-eye-low-vision"></i></button>
              </div>
              <div class="invalid-feedback mb-0">
                <ul class="errorlist m-0">
                  {% for error in form.password1.errors %}
                  <li>{{ error }}</li>
                  {% endfor %}
                </ul>
              </div>
            {% else %}
              <div class="input-group mb-3">
                {{ form.password1|add_custom_class:"form-control" }}
                <button class="btn btn-secondary" type="button" onclick="passwordToggle('{{ form.password1.auto_id }}')"><i id="{{form.password1.auto_id}}_toggle" class="password-toggle-icon fa-solid fa-eye-low-vision"></i></button>
              </div>
            {% endif %}
            <div id="{{ form.password1.auto_id }}_help_text" class="form-text">{{form.password1.help_text}}</div>      
          </div> 
        </div> 

        <div class="row mb-3">
          <label class="form-label col-md-2 m-0 " for="{{ form.password2.auto_id }}">{{ form.password2.label }}</label>
          <div class="col-md-10">
            {% if form.password2.errors %}
              <div class="input-group mb-3">
                {{ form.password2|add_custom_class:"form-control is-invalid" }}
                <button class="btn btn-secondary" type="button" onclick="passwordToggle('{{ form.password2.auto_id }}')"><i id="{{form.password2.auto_id}}_toggle" class="password-toggle-icon fa-solid fa-eye-low-vision"></i></button>
              </div>
              <div class="invalid-feedback mb-0">
                <ul class="errorlist m-0">
                  {% for error in form.password2.errors %}
                  <li>{{ error }}</li>
                  {% endfor %}
                </ul>
              </div>
            {% else %}
              <div class="input-group mb-3">
                {{ form.password2|add_custom_class:"form-control" }}
                <button class="btn btn-secondary" type="button" onclick="passwordToggle('{{ form.password2.auto_id }}')"><i id="{{form.password2.auto_id}}_toggle" class="password-toggle-icon fa-solid fa-eye-low-vision"></i></button>
              </div>
            {% endif %}
            <div id="{{ form.password2.auto_id }}_help_text" class="form-text">{{form.password2.help_text}}</div>

          </div> 
        </div> 

        <small>if you have an account login <a href={% url "Staff:login" %}>here</a></small> 

      <button class="btn btn-outline-primary" type="submit">SignUp</button>

    </form>

  </div>
</div>
{% endblock content %}

{% block scripts %}
<script src={% static 'staff/js/password_toggle.js' %}></script>
{% endblock scripts %}